# Ukulele Tuesday Songbooks

This repository contains the code for a static website that displays the entire collection of [Ukulele Tuesday](https://ukuleletuesday.ie/) songbooks. The site provides a browsable, grid-based view of all songbooks, each with a preview image and a direct link to download the PDF.

The live site is automatically updated and deployed via GitHub Actions to [https://songbooks.ukuleletuesday.ie/](https://songbooks.ukuleletuesday.ie/).

## How It Works

The website is generated by a Python script (`main.py`) that performs the following steps:

1.  **Fetches PDFs**: Lists all PDF files from a designated Google Cloud Storage bucket.
2.  **Generates Previews**: For each PDF, it creates a PNG preview of the first page.
3.  **Renders HTML**: Uses a Jinja2 template to create an `index.html` file that displays the songbooks with their titles, subtitles, and preview images.
4.  **Copies Assets**: Copies static assets (like logos) into the final output directory.

The entire process is automated with a GitHub Actions workflow (`.github/workflows/deploy.yml`), which runs on every push to the `main` branch or on an hourly schedule. The workflow builds the site and deploys it to GitHub Pages.

## A Note on Songbook Generation

This project is responsible only for displaying the songbooks on a static website. It does not create or modify the songbook PDFs themselves.

The generation of the songbooks is handled by a separate, more complex project: the [Ukulele Tuesday Songbook Generator](https://github.com/UkuleleTuesday/songbook-generator/). That tool fetches individual song sheets from Google Drive, compiles them into complete songbooks, and uploads the final PDFs to the Google Cloud Storage bucket that this project reads from.

## Running Locally

To generate the website on your local machine:

1.  **Clone the repository:**
    ```bash
    git clone https://github.com/UkuleleTuesday/songbooks.git
    cd songbooks
    ```
2.  **Install dependencies:**
    The project uses `uv` for package management. You'll also need `mupdf-tools`.
    ```bash
    # For Debian/Ubuntu-based systems
    sudo apt-get update && sudo apt-get install -y mupdf-tools
    
    # Install Python packages
    uv sync
    ```
3.  **Set Environment Variable:**
    The script requires the `GCS_BUCKET` environment variable to be set to the name of the Google Cloud Storage bucket containing the songbooks.
    ```bash
    export GCS_BUCKET="ukulele-tuesday-songbooks"
    ```
4.  **Run the script:**
    ```bash
    uv run main.py
    ```
    The generated site will be available in the `public/` directory. You can open `public/index.html` in a web browser to view it.
